{"file":"/Users/danilonovais/_danilonov_portfolio/src/lib/portfolio/project-mappers.ts","mappings":"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","names":[],"sources":["/Users/danilonovais/_danilonov_portfolio/src/lib/portfolio/project-mappers.ts"],"sourcesContent":["import type {\n  PortfolioProject,\n  ProjectCategory,\n  ProjectGridLayout,\n  ProjectType,\n} from '@/types/project';\nimport { buildSupabaseStorageUrl } from '@/lib/supabase/urls';\nimport type { DbProjectWithTags } from '@/lib/supabase/queries/projects';\n\n// Define a type for the static project from HOME_CONTENT\ntype StaticProject = {\n  id: number;\n  slug: string;\n  title: string;\n  category: string;\n  client: string;\n  year: number;\n  tags: string[];\n  img: string | null | undefined;\n  layout: {\n    h: string;\n    cols: string;\n    sizes: string;\n  };\n};\n\nconst CATEGORY_MAP: Record<string, ProjectCategory> = {\n  'Branding & Identity': 'branding',\n  'Campanhas & Advertising': 'campanha',\n  Campanha: 'campanha',\n  Branding: 'branding',\n  'Web & Digital': 'web',\n  'Motion & Video': 'motion',\n  'Institucional & Retail': 'institucional',\n  Packaging: 'packaging',\n};\n\nconst ACCENT_COLOR_MAP: Record<ProjectCategory, string> = {\n  branding: '#0057ff',\n  campanha: '#ff3366',\n  web: '#4fe6ff',\n  motion: '#8705f2',\n  institucional: '#00a868',\n  packaging: '#ffd700',\n  all: '#ffffff',\n};\n\nfunction getProjectCategory(projectType?: string): ProjectCategory {\n  if (!projectType) return 'branding';\n  const normalized = projectType.trim();\n  return CATEGORY_MAP[normalized] ?? 'branding';\n}\n\nfunction determineProjectType(\n  project: DbProjectWithTags | StaticProject\n): ProjectType {\n  if ('featured_on_home' in project) {\n    // It's a DbProjectWithTags\n    if (project.featured_on_home || project.featured_on_portfolio) {\n      return 'A';\n    }\n  }\n  // For StaticProject, or if not featured, default to 'B'\n  // You might want to refine this logic based on your static data structure\n  return 'B';\n}\n\nfunction buildLayout(\n  projectType: ProjectType,\n  index: number\n): ProjectGridLayout {\n  /**\n   * Layout Pattern para Portfolio Grid:\n   * - Rows devem sempre somar 12 colunas (edge-to-edge)\n   * - Altura fixa no desktop para uniformidade visual\n   * - Pattern: [5+7], [7+5], [4+4+4], [6+6], [8+4], [4+8]\n   */\n  const pairedLayouts = [\n    // Row pattern: 5 + 7 = 12\n    {\n      cols: 'md:col-span-5 lg:col-span-5',\n      height: 'min-h-[320px]',\n      aspectRatio: 'aspect-[4/5]',\n      sizes: '(max-width: 768px) 100vw, (max-width: 1200px) 42vw, 42vw',\n    },\n    {\n      cols: 'md:col-span-3 lg:col-span-7',\n      height: 'min-h-[320px]',\n      aspectRatio: 'aspect-[4/5]',\n      sizes: '(max-width: 768px) 100vw, (max-width: 1200px) 58vw, 58vw',\n    },\n    // Row pattern: 7 + 5 = 12\n    {\n      cols: 'md:col-span-5 lg:col-span-7',\n      height: 'min-h-[320px]',\n      aspectRatio: 'aspect-[4/5]',\n      sizes: '(max-width: 768px) 100vw, (max-width: 1200px) 58vw, 58vw',\n    },\n    {\n      cols: 'md:col-span-3 lg:col-span-5',\n      height: 'min-h-[320px]',\n      aspectRatio: 'aspect-[4/5]',\n      sizes: '(max-width: 768px) 100vw, (max-width: 1200px) 42vw, 42vw',\n    },\n    // Row pattern: 4 + 4 + 4 = 12 (3 cards per row)\n    {\n      cols: 'md:col-span-4 lg:col-span-4',\n      height: 'min-h-[320px]',\n      aspectRatio: 'aspect-[4/5]',\n      sizes: '(max-width: 768px) 100vw, (max-width: 1200px) 33vw, 33vw',\n    },\n    {\n      cols: 'md:col-span-4 lg:col-span-4',\n      height: 'min-h-[320px]',\n      aspectRatio: 'aspect-[4/5]',\n      sizes: '(max-width: 768px) 100vw, (max-width: 1200px) 33vw, 33vw',\n    },\n    {\n      cols: 'md:col-span-4 lg:col-span-4',\n      height: 'min-h-[320px]',\n      aspectRatio: 'aspect-[4/5]',\n      sizes: '(max-width: 768px) 100vw, (max-width: 1200px) 33vw, 33vw',\n    },\n    // Row pattern: 6 + 6 = 12 (2 equal cards)\n    {\n      cols: 'md:col-span-4 lg:col-span-6',\n      height: 'min-h-[320px]',\n      aspectRatio: 'aspect-[4/5]',\n      sizes: '(max-width: 768px) 100vw, 50vw',\n    },\n    {\n      cols: 'md:col-span-4 lg:col-span-6',\n      height: 'min-h-[320px]',\n      aspectRatio: 'aspect-[4/5]',\n      sizes: '(max-width: 768px) 100vw, 50vw',\n    },\n  ];\n\n  // Para projetos do tipo A (featured), usar layouts variados\n  // Para tipo B, usar grid uniforme de 4 colunas\n  if (projectType === 'A') {\n    const layoutIndex = index % pairedLayouts.length;\n    return pairedLayouts[layoutIndex];\n  }\n\n  // Projetos tipo B: sempre 4 colunas (3 por linha no lg)\n  return {\n    cols: 'md:col-span-4 lg:col-span-4',\n    height: 'min-h-[320px]',\n    aspectRatio: 'aspect-[4/5]',\n    sizes: '(max-width: 768px) 100vw, (max-width: 1200px) 33vw, 33vw',\n  };\n}\n\nfunction toTagsList(tags?: DbProjectWithTags['tags'] | string[]): string[] {\n  if (!tags) return [];\n  if (typeof tags[0] === 'string') {\n    return tags as string[];\n  }\n  return (\n    (tags as DbProjectWithTags['tags'])\n      ?.map((entry) => entry?.tag?.label ?? entry?.tag?.slug)\n      .filter(Boolean)\n      .map((value) => value as string) ?? []\n  );\n}\n\nfunction createGallery(project: DbProjectWithTags): string[] {\n  const entries = project.gallery ?? [];\n  return entries\n    .filter((entry): entry is { path: string; caption?: string } => !!entry)\n    .map((entry) => entry.path)\n    .filter((path): path is string => !!path)\n    .map((path) => buildSupabaseStorageUrl('portfolio-media', path))\n    .filter((url): url is string => !!url); // Additional filter to remove any null urls from buildSupabaseStorageUrl\n}\n\nfunction toVideoPreview(galleryUrls: string[]) {\n  const videoExt = ['mp4', 'mov', 'webm', 'm4v'];\n  return (\n    galleryUrls.find((url) => {\n      const extension = url.split('.').pop()?.toLowerCase();\n      return extension ? videoExt.includes(extension) : false;\n    }) ?? undefined\n  );\n}\n\nexport function mapDbProjectToPortfolioProject(\n  project: DbProjectWithTags,\n  index: number\n): PortfolioProject {\n  const type = determineProjectType(project);\n  const layout = buildLayout(type, index);\n  const category = getProjectCategory(project.project_type);\n  const tags = toTagsList(project.tags);\n  const gallery = createGallery(project);\n  const thumbnailUrl =\n    buildSupabaseStorageUrl('portfolio-media', project.thumbnail_path ?? undefined) ||\n    buildSupabaseStorageUrl('portfolio-media', project.hero_image_path ?? undefined);\n\n  const detail = {\n    description: project.description ?? '',\n    highlights: tags.length ? tags.slice(0, 3) : undefined,\n    gallery, // Already filtered in createGallery function\n  };\n\n  return {\n    id: project.id,\n    slug: project.slug,\n    title: project.title,\n    subtitle: project.short_label ?? project.client_name,\n    client: project.client_name,\n    category,\n    displayCategory: project.project_type ?? 'Web',\n    tags,\n    year: project.year ?? 0,\n    image: thumbnailUrl || '',\n    type,\n    layout,\n    detail,\n    accentColor: ACCENT_COLOR_MAP[category] ?? undefined,\n    isFeatured: project.featured_on_portfolio,\n    featuredOnHome: project.featured_on_home,\n    featuredOnPortfolio: project.featured_on_portfolio,\n    videoPreview: toVideoPreview(gallery),\n    landingPageSlug: project.landing_page?.slug,\n  };\n}\n\nexport function mapStaticProjectToPortfolioProject(\n  project: StaticProject,\n  index: number\n): PortfolioProject {\n  const type = determineProjectType(project);\n  const layout = buildLayout(type, index);\n  const category = getProjectCategory(project.category);\n  const tags = toTagsList(project.tags);\n\n  const detail = {\n    description: project.title, // fallback\n    highlights: tags.slice(0, 3),\n    gallery: project.img ? [project.img] : [],\n  };\n\n  return {\n    id: `static-${project.id}`,\n    slug: project.slug,\n    title: project.title,\n    subtitle: project.client,\n    client: project.client,\n    category,\n    displayCategory: project.category,\n    tags,\n    year: project.year,\n    image: project.img || '',\n    type,\n    layout,\n    detail,\n    accentColor: ACCENT_COLOR_MAP[category] ?? undefined,\n    isFeatured: true,\n    featuredOnHome: true,\n    featuredOnPortfolio: true,\n    videoPreview: undefined,\n    landingPageSlug: undefined,\n  };\n}\n"],"version":3}