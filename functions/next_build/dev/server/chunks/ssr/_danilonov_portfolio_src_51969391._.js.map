{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/danilonovais/_danilonov_portfolio/src/config/admin-navigation.ts"],"sourcesContent":["export const ADMIN_NAVIGATION = {\n  dashboard: '/admin',\n  trabalhos: {\n    index: '/admin/trabalhos',\n    new: '/admin/trabalhos/new',\n    detail: (id: string) => `/admin/trabalhos/${id}`,\n  },\n  tags: '/admin/tags',\n  midia: '/admin/midia',\n  'landing-pages': '/admin/landing-pages',\n  config: '/admin/config',\n} as const;\n"],"names":[],"mappings":";;;;AAAO,MAAM,mBAAmB;IAC9B,WAAW;IACX,WAAW;QACT,OAAO;QACP,KAAK;QACL,QAAQ,CAAC,KAAe,CAAC,iBAAiB,EAAE,IAAI;IAClD;IACA,MAAM;IACN,OAAO;IACP,iBAAiB;IACjB,QAAQ;AACV"}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///Users/danilonovais/_danilonov_portfolio/src/components/admin/LoginForm.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useTransition, useEffect } from 'react';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport { createClientComponentClient } from '@/lib/supabase/client';\nimport { ADMIN_NAVIGATION } from '@/config/admin-navigation';\n\nexport default function LoginForm() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState<string | null>(null);\n  const [isPending, startTransition] = useTransition();\n  const [isRedirecting, setIsRedirecting] = useState(false);\n  const router = useRouter();\n  const searchParams = useSearchParams();\n\n  // Check for auth errors from callback\n  useEffect(() => {\n    const authError = searchParams.get('error');\n    if (authError) {\n      setError('Erro na autenticação. Por favor, tente novamente.');\n    }\n  }, [searchParams]);\n\n  // Check if already logged in on mount\n  useEffect(() => {\n    // const checkSession = async () => {\n    //   const supabase = createClientComponentClient();\n    //   // Use getUser instead of getSession for better server consistency\n    //   const {\n    //     data: { user },\n    //   } = await supabase.auth.getUser();\n    //   if (user) {\n    //     setIsRedirecting(true);\n    //     // Ensure server sync before client navigation\n    //     router.refresh();\n    //     router.replace(ADMIN_NAVIGATION.dashboard);\n    //   }\n    // };\n    // checkSession();\n  }, [router]);\n\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    setError(null);\n\n    startTransition(async () => {\n      try {\n        const supabase = createClientComponentClient();\n        const { data, error: signInError } =\n          await supabase.auth.signInWithPassword({\n            email,\n            password,\n          });\n\n        if (signInError) {\n          setError(signInError.message);\n          return;\n        }\n\n        if (data.session) {\n          setIsRedirecting(true);\n          // Important: Refresh ensures Next.js Server Components see the new cookies\n          router.refresh();\n\n          // Use a small delay and window.location.href for a full reload\n          // This ensures cookies are properly picked up by the server on next load\n          setTimeout(() => {\n            window.location.href = ADMIN_NAVIGATION.dashboard;\n          }, 500);\n        } else {\n          setError('Falha ao estabelecer sessão. Tente novamente.');\n        }\n      } catch (err) {\n        console.error('Login error:', err);\n        setError('Ocorreu um erro inesperado.');\n      }\n    });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <p className=\"text-sm uppercase tracking-[0.25em] text-slate-400\">\n          Admin\n        </p>\n        <h1 className=\"text-2xl font-semibold mt-2\">Entrar no painel</h1>\n        <p className=\"text-sm text-slate-400 mt-1\">\n          Use seu email e senha do Supabase Auth.\n        </p>\n      </div>\n\n      <form className=\"space-y-4\" onSubmit={handleSubmit}>\n        <label className=\"flex flex-col gap-2\">\n          <span className=\"text-sm text-slate-300\">Email</span>\n          <input\n            type=\"email\"\n            required\n            className=\"rounded-md bg-slate-900/60 border border-white/10 px-3 py-2 text-sm\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n          />\n        </label>\n        <label className=\"flex flex-col gap-2\">\n          <span className=\"text-sm text-slate-300\">Senha</span>\n          <input\n            type=\"password\"\n            required\n            className=\"rounded-md bg-slate-900/60 border border-white/10 px-3 py-2 text-sm\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n        </label>\n\n        {error && <div className=\"text-sm text-red-400\">{error}</div>}\n\n        <button\n          type=\"submit\"\n          className=\"w-full rounded-md bg-blue-500 py-2 text-sm font-semibold text-white shadow transition hover:bg-blue-600 disabled:opacity-60\"\n          disabled={isPending || isRedirecting}\n        >\n          {isRedirecting\n            ? 'Redirecionando...'\n            : isPending\n              ? 'Entrando...'\n              : 'Entrar'}\n        </button>\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yOAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yOAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yOAAQ,EAAgB;IAClD,MAAM,CAAC,WAAW,gBAAgB,GAAG,IAAA,8OAAa;IAClD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yOAAQ,EAAC;IACnD,MAAM,SAAS,IAAA,uKAAS;IACxB,MAAM,eAAe,IAAA,6KAAe;IAEpC,sCAAsC;IACtC,IAAA,0OAAS,EAAC;QACR,MAAM,YAAY,aAAa,GAAG,CAAC;QACnC,IAAI,WAAW;YACb,SAAS;QACX;IACF,GAAG;QAAC;KAAa;IAEjB,sCAAsC;IACtC,IAAA,0OAAS,EAAC;IACR,qCAAqC;IACrC,oDAAoD;IACpD,uEAAuE;IACvE,YAAY;IACZ,sBAAsB;IACtB,uCAAuC;IACvC,gBAAgB;IAChB,8BAA8B;IAC9B,qDAAqD;IACrD,wBAAwB;IACxB,kDAAkD;IAClD,MAAM;IACN,KAAK;IACL,kBAAkB;IACpB,GAAG;QAAC;KAAO;IAEX,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,SAAS;QAET,gBAAgB;YACd,IAAI;gBACF,MAAM,WAAW,IAAA,uLAA2B;gBAC5C,MAAM,EAAE,IAAI,EAAE,OAAO,WAAW,EAAE,GAChC,MAAM,SAAS,IAAI,CAAC,kBAAkB,CAAC;oBACrC;oBACA;gBACF;gBAEF,IAAI,aAAa;oBACf,SAAS,YAAY,OAAO;oBAC5B;gBACF;gBAEA,IAAI,KAAK,OAAO,EAAE;oBAChB,iBAAiB;oBACjB,2EAA2E;oBAC3E,OAAO,OAAO;oBAEd,+DAA+D;oBAC/D,yEAAyE;oBACzE,WAAW;wBACT,OAAO,QAAQ,CAAC,IAAI,GAAG,gLAAgB,CAAC,SAAS;oBACnD,GAAG;gBACL,OAAO;oBACL,SAAS;gBACX;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,gBAAgB;gBAC9B,SAAS;YACX;QACF;IACF;IAEA,qBACE,sQAAC;QAAI,WAAU;;0BACb,sQAAC;;kCACC,sQAAC;wBAAE,WAAU;kCAAqD;;;;;;kCAGlE,sQAAC;wBAAG,WAAU;kCAA8B;;;;;;kCAC5C,sQAAC;wBAAE,WAAU;kCAA8B;;;;;;;;;;;;0BAK7C,sQAAC;gBAAK,WAAU;gBAAY,UAAU;;kCACpC,sQAAC;wBAAM,WAAU;;0CACf,sQAAC;gCAAK,WAAU;0CAAyB;;;;;;0CACzC,sQAAC;gCACC,MAAK;gCACL,QAAQ;gCACR,WAAU;gCACV,OAAO;gCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;kCAG5C,sQAAC;wBAAM,WAAU;;0CACf,sQAAC;gCAAK,WAAU;0CAAyB;;;;;;0CACzC,sQAAC;gCACC,MAAK;gCACL,QAAQ;gCACR,WAAU;gCACV,OAAO;gCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;oBAI9C,uBAAS,sQAAC;wBAAI,WAAU;kCAAwB;;;;;;kCAEjD,sQAAC;wBACC,MAAK;wBACL,WAAU;wBACV,UAAU,aAAa;kCAEtB,gBACG,sBACA,YACE,gBACA;;;;;;;;;;;;;;;;;;AAKhB"}},
    {"offset": {"line": 237, "column": 0}, "map": {"version":3,"sources":["file:///Users/danilonovais/_danilonov_portfolio/src/app/admin/%28auth%29/login/page.tsx"],"sourcesContent":["// Client component for login\n'use client';\n\nimport { Suspense } from 'react';\nimport LoginForm from '@/components/admin/LoginForm';\n\nexport default function LoginPage() {\n  return (\n    <Suspense\n      fallback={\n        <div className=\"space-y-6\">\n          <p className=\"text-sm uppercase tracking-[0.25em] text-slate-400\">\n            Admin\n          </p>\n          <h1 className=\"text-2xl font-semibold mt-2\">Carregando...</h1>\n        </div>\n      }\n    >\n      <LoginForm />\n    </Suspense>\n  );\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAJA,6BAA6B;AAC7B;;;;AAKe,SAAS;IACtB,qBACE,sQAAC,yOAAQ;QACP,wBACE,sQAAC;YAAI,WAAU;;8BACb,sQAAC;oBAAE,WAAU;8BAAqD;;;;;;8BAGlE,sQAAC;oBAAG,WAAU;8BAA8B;;;;;;;;;;;;kBAIhD,cAAA,sQAAC,2KAAS;;;;;;;;;;AAGhB"}}]
}