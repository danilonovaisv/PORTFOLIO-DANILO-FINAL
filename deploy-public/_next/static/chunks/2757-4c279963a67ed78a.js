"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2757],{3091:(e,a,t)=>{t.d(a,{_:()=>s,r:()=>l});let l="legacy-blocks",s="master-project-v1"},28713:(e,a,t)=>{t.d(a,{i:()=>i});var l=t(57716),s=t(87358);let r=null;function i(){if(s.env.PLAYWRIGHT_TEST){let e={eq:()=>e,order:()=>e,limit:()=>e,returns:()=>Promise.resolve({data:[],error:null}),select:()=>e,single:()=>Promise.resolve({data:null,error:null})};return{from:()=>e,auth:{getSession:()=>Promise.resolve({data:{session:null},error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}})},storage:{from:()=>({getPublicUrl:()=>({data:{publicUrl:""}})})}}}if(r)return r;let e="https://umkmwbkwvulxtdodzmzf.supabase.co",a=s.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY??"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVta213Ymt3dnVseHRkb2R6bXpmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzNDE4MzcsImV4cCI6MjA4MzkxNzgzN30.wssvD9W-yzRyLpq8aMCw57E4wNz7OnQ58ujLzYmF6CA";if(!e)throw Error("NEXT_PUBLIC_SUPABASE_URL n\xe3o est\xe1 definida.");if(!a)throw Error("Defina NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY ou NEXT_PUBLIC_SUPABASE_ANON_KEY.");return r=(0,l.createBrowserClient)(e,a,{cookieOptions:{name:"__session",sameSite:"lax",secure:!0}})}},32956:(e,a,t)=>{t.d(a,{bw:()=>d,f5:()=>c,hw:()=>p});var l=t(3091);let s=e=>!e||"object"!=typeof e||Array.isArray(e)?null:e,r=e=>{if("string"!=typeof e)return;let a=e.trim();return a.length>0?a:void 0},i=e=>Array.isArray(e)?e.map(e=>r(e)).filter(e=>!!e):[],o=e=>"video"===e?"video":"image",n=(e,a,t)=>{let l=s(e);return{src:r(l?.src)??t??"",alt:r(l?.alt)??a,kind:o(l?.kind),poster:r(l?.poster)}};function c(e){if(!e)return"";if(e.startsWith("http://")||e.startsWith("https://"))return e;let a="https://umkmwbkwvulxtdodzmzf.supabase.co".replace(/\/$/,"");if(!a)return e;let t=e.replace(/^\/?storage\/v1\/object\/public\/site-assets\//,"").replace(/^\/?site-assets\//,"").replace(/^\//,"");return`${a}/storage/v1/object/public/site-assets/${t}`}function d(e={}){let a=e.title??"Novo Projeto";return{schema_version:"1.0",template:l._,project_slug:e.slug??"",hero_cover_image:{src:e.cover??"",alt:`Capa do projeto ${a}`,kind:"image"},project_title:a,project_subtitle:"",project_client:"",project_year:void 0,project_tags:[],project_services:[],project_summary:"",intro_headline:"",intro_body:[],highlight_color:"#0048ff",gallery_grid:[],navigation:{back_label:"voltar",next_label:"pr\xf3ximo projeto",next_project_slug:""},cta:{label:"vamos trabalhar juntos â†’",href:"/#contact"},seo:{description:"",og_image:e.cover??""}}}function p(e,a={}){let t=function(e,a={}){let t=s(e);if(!t||!(r(t.template)===l._||null!==s(t.hero_cover_image)||Array.isArray(t.gallery_grid)))return null;let c=d(a),p=`Capa do projeto ${a.title??c.project_title}`,m=Array.isArray(t.gallery_grid)?t.gallery_grid.map((e,a)=>((e,a,t)=>{let l=s(e);if(!l)return null;let i=r(l.src);return i?{id:r(l.id)??`grid-item-${a+1}`,src:i,alt:r(l.alt)??t,kind:o(l.kind),layout:(e=>{switch(e){case"quote-band":case"feature":case"split-left":case"split-right":return e;default:return"full"}})(l.layout),poster:r(l.poster),title:r(l.title),eyebrow:r(l.eyebrow),description:r(l.description),quote:r(l.quote)}:null})(e,a,p)).filter(e=>null!==e):c.gallery_grid,u=s(t.navigation),x=s(t.cta),h=s(t.seo);return{schema_version:"1.0",template:l._,project_slug:r(t.project_slug)??a.slug??c.project_slug,hero_cover_image:n(t.hero_cover_image,p,a.cover??c.hero_cover_image.src),hero_logo_image:s(t.hero_logo_image)?n(t.hero_logo_image,`${c.project_title} logo`):void 0,project_title:r(t.project_title)??a.title??c.project_title,project_subtitle:r(t.project_subtitle)??c.project_subtitle,project_client:r(t.project_client)??c.project_client,project_year:(e=>{if("number"==typeof e&&Number.isFinite(e))return e;if("string"==typeof e){let a=Number(e);if(Number.isFinite(a))return a}})(t.project_year)??c.project_year,project_tags:i(t.project_tags),project_services:i(t.project_services),project_summary:r(t.project_summary)??c.project_summary,intro_headline:r(t.intro_headline)??c.intro_headline,intro_body:i(t.intro_body),highlight_color:r(t.highlight_color)??c.highlight_color,gallery_grid:m,navigation:{back_label:r(u?.back_label)??c.navigation?.back_label,next_label:r(u?.next_label)??c.navigation?.next_label,next_project_slug:r(u?.next_project_slug)??c.navigation?.next_project_slug},cta:{label:r(x?.label)??c.cta?.label,href:r(x?.href)??c.cta?.href},seo:{description:r(h?.description)??c.seo?.description,og_image:r(h?.og_image)??c.seo?.og_image}}}(e,a);if(t)return{template:l._,data:t};let c=Array.isArray(e)?e:[];return{template:l.r,blocks:c}}},40980:(e,a,t)=>{t.d(a,{cn:()=>r,t:()=>i});var l=t(29722),s=t(622);function r(...e){return(0,s.QP)((0,l.$)(e))}function i(e){if(!e)return"";let a=e.replace(/[!]/g,"").replace(/\.{2,}/g,".").replace(/[^a-zA-Z0-9_\-#%.()[\]]/g,"");return!a||function(e){let a,t=/\[([^\]]*)\]/g;for(;null!==(a=t.exec(e));){let e=a[1].trim();if(!e||/^[.\d]/.test(e)||/^[0-9A-Fa-f]+$/.test(e)&&!e.startsWith("#"))return!0}return!1}(a)?"":a}},42757:(e,a,t)=>{t.d(a,{A:()=>Y});var l=t(95155),s=t(12115),r=t(73321),i=t(82309),o=t(28713),n=t(91010),c=t(80723),d=t(55243),p=t(68459),m=t(17243),u=t(51914),x=t(24338),h=t(45005),g=t(8434),b=t(6312),j=t(9921),v=t(66088),f=t(85580),N=t(98500),_=t.n(N),w=t(5772),y=t(47834);function k({label:e,type:a,value:t,previewUrl:r,onFileSelect:i,onUrlChange:o,onClear:n}){let c,[d,u]=(0,s.useState)("upload");(0,s.useEffect)(()=>{t&&(t.startsWith("http")||t.startsWith("www"))&&!t.includes("supabase.co")&&u("url")},[t]);let x="url"===d&&t&&(c=t.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/))&&11===c[2].length?c[2]:null,g=!!r||!!t&&"url"===d,b=r||t;return(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("label",{className:"text-xs uppercase tracking-widest text-slate-500 font-medium",children:e}),(0,l.jsxs)("div",{className:"flex bg-slate-800 p-1 rounded-lg",children:[(0,l.jsx)("button",{onClick:()=>u("upload"),className:`px-2 py-1 text-xs rounded-md transition-all ${"upload"===d?"bg-slate-600 text-white":"text-slate-400 hover:text-white"}`,children:"Upload"}),(0,l.jsx)("button",{onClick:()=>u("url"),className:`px-2 py-1 text-xs rounded-md transition-all ${"url"===d?"bg-slate-600 text-white":"text-slate-400 hover:text-white"}`,children:"Link"})]})]}),g?(0,l.jsxs)("div",{className:"relative rounded-xl overflow-hidden border border-white/10 group bg-black/20",children:[x?(0,l.jsx)("div",{className:"aspect-video w-full bg-black",children:(0,l.jsx)("iframe",{src:`https://www.youtube.com/embed/${x}?autoplay=0&mute=1&modestbranding=1`,title:"YouTube preview",className:"w-full h-full border-none",allowFullScreen:!0})}):"image"===a?(0,l.jsx)("div",{className:"relative min-h-[12.5rem] max-h-[25rem] w-full flex justify-center bg-black/40",children:(0,l.jsx)("img",{src:b,alt:"Preview",className:"h-full w-auto max-h-[25rem] object-contain"})}):(0,l.jsx)("video",{src:b,className:"w-full max-h-[25rem] object-contain",controls:!0,muted:!0,loop:!0,autoPlay:!0}),(0,l.jsx)("div",{className:"absolute top-2 right-2 flex gap-2",children:(0,l.jsx)("button",{onClick:n,className:"bg-red-500 p-2 rounded-full hover:bg-red-600 transition-colors shadow-lg",title:"Remover m\xeddia",children:(0,l.jsx)(p.A,{size:16})})})]}):"upload"===d?(0,l.jsxs)("label",{className:"flex flex-col items-center justify-center py-12 rounded-xl border-2 border-dashed border-white/10 hover:border-blue-500 hover:bg-blue-500/5 cursor-pointer transition-all group",children:["image"===a?(0,l.jsx)(m.A,{className:"text-slate-600 mb-2 group-hover:text-blue-400 transition-colors",size:32}):(0,l.jsx)(h.A,{className:"text-slate-600 mb-2 group-hover:text-blue-400 transition-colors",size:32}),(0,l.jsx)("span",{className:"text-xs text-slate-500 font-medium uppercase tracking-widest group-hover:text-blue-300",children:"Escolher Arquivo"}),(0,l.jsx)("input",{type:"file",accept:"image"===a?"image/*":"video/*",onChange:e=>{let a=e.target.files?.[0];a&&i(a)},className:"hidden"})]}):(0,l.jsxs)("div",{className:"flex items-center gap-2 bg-slate-950 border border-white/10 rounded-xl px-4 py-3 focus-within:border-blue-500 transition-colors",children:[(0,l.jsx)(y.A,{className:"text-slate-500",size:18}),(0,l.jsx)("input",{type:"text",placeholder:"image"===a?"https://exemplo.com/imagem.jpg":"Pinte aqui o link do YouTube ou .mp4",className:"bg-transparent border-none outline-none w-full text-sm text-white placeholder-slate-600",onChange:e=>o(e.target.value),value:t||""})]})]})}function C({block:e,onChange:a}){let t=t=>{a({content:{...e.content,...t}})},s=(a,s)=>{let r="text"===a?"textConfig":"textConfig2",i=e.content[r]||{},o=e=>{t({[r]:{...i,...e}})};return(0,l.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,l.jsxs)("label",{className:"text-xs uppercase tracking-widest text-slate-500 font-medium flex items-center gap-2",children:[(0,l.jsx)(x.A,{size:14})," ",s]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 bg-slate-900/50 p-3 rounded-xl border border-white/5",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("span",{className:"text-[10px] uppercase text-slate-500 block",children:"Tamanho"}),(0,l.jsxs)("select",{value:i.fontSize||"",onChange:e=>o({fontSize:e.target.value}),className:"w-full bg-slate-800 text-[11px] rounded p-1 outline-none border border-white/10 text-white",title:"Tamanho do Texto",children:[(0,l.jsx)("option",{value:"",children:"Padr\xe3o"}),(0,l.jsx)("option",{value:"text-xs",children:"Extra Small"}),(0,l.jsx)("option",{value:"text-sm",children:"Small"}),(0,l.jsx)("option",{value:"text-base",children:"Base"}),(0,l.jsx)("option",{value:"text-lg",children:"Large"}),(0,l.jsx)("option",{value:"text-xl",children:"Extra Large"}),(0,l.jsx)("option",{value:"text-2xl",children:"2XL"}),(0,l.jsx)("option",{value:"text-3xl",children:"3XL"}),(0,l.jsx)("option",{value:"text-4xl",children:"4XL"}),(0,l.jsx)("option",{value:"text-5xl",children:"5XL"}),(0,l.jsx)("option",{value:"text-6xl",children:"6XL"}),(0,l.jsx)("option",{value:"text-7xl",children:"7XL"}),(0,l.jsx)("option",{value:"text-8xl",children:"8XL"})]})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("span",{className:"text-[10px] uppercase text-slate-500 block",children:"Peso"}),(0,l.jsxs)("select",{value:i.fontWeight||"",onChange:e=>o({fontWeight:e.target.value}),className:"w-full bg-slate-800 text-[11px] rounded p-1 outline-none border border-white/10 text-white",title:"Peso da Fonte",children:[(0,l.jsx)("option",{value:"",children:"Padr\xe3o"}),(0,l.jsx)("option",{value:"font-thin",children:"Thin"}),(0,l.jsx)("option",{value:"font-light",children:"Light"}),(0,l.jsx)("option",{value:"font-normal",children:"Normal"}),(0,l.jsx)("option",{value:"font-medium",children:"Medium"}),(0,l.jsx)("option",{value:"font-semibold",children:"SemiBold"}),(0,l.jsx)("option",{value:"font-bold",children:"Bold"}),(0,l.jsx)("option",{value:"font-extrabold",children:"ExtraBold"}),(0,l.jsx)("option",{value:"font-black",children:"Black"})]})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("span",{className:"text-[10px] uppercase text-slate-500 block",children:"Alinhamento"}),(0,l.jsxs)("select",{value:i.textAlign||"",onChange:e=>o({textAlign:e.target.value}),className:"w-full bg-slate-800 text-[11px] rounded p-1 outline-none border border-white/10 text-white",title:"Alinhamento do Texto",children:[(0,l.jsx)("option",{value:"",children:"Padr\xe3o"}),(0,l.jsx)("option",{value:"text-left",children:"Esquerda"}),(0,l.jsx)("option",{value:"text-center",children:"Centralizado"}),(0,l.jsx)("option",{value:"text-right",children:"Direita"}),(0,l.jsx)("option",{value:"text-justify",children:"Justificado"})]})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("span",{className:"text-[10px] uppercase text-slate-500 block",children:"Cor (Hex)"}),(0,l.jsx)("input",{type:"text",value:i.color||"",onChange:e=>o({color:e.target.value}),placeholder:"#FFFFFF",className:"w-full bg-slate-800 text-[11px] rounded p-1 outline-none border border-white/10 text-white placeholder-slate-600"})]})]}),(0,l.jsx)("textarea",{value:e.content[a]||"",onChange:e=>t({[a]:e.target.value}),className:"w-full h-full min-h-[200px] bg-slate-950/50 border border-white/10 rounded-xl p-4 outline-none focus:border-blue-500/50 transition-all resize-none font-sans",placeholder:"# T\xedtulo... \\n\\nPar\xe1grafo com conte\xfado..."})]})},r=(t,s,r,i,o)=>(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)(k,{label:o,type:s,value:e.content[t],previewUrl:e[i],onFileSelect:t=>{a({[r]:t,["file"===r?"previewUrl":"previewUrl2"]:URL.createObjectURL(t),content:{...e.content,["file"===r?"media":"media2"]:""}})},onUrlChange:l=>{a({["media"===t?"file":"file2"]:null,["media"===t?"previewUrl":"previewUrl2"]:"",content:{...e.content,[t]:l}})},onClear:()=>{a({[r]:null,[i]:"",content:{...e.content,[t]:""}})}})});switch(e.type){case"text":return(0,l.jsx)("div",{className:"p-4",children:s("text","Conte\xfado de Texto")});case"image":return(0,l.jsx)("div",{className:"p-4",children:r("media","image","file","previewUrl","Imagem Full")});case"video":case"video-autoplay":return(0,l.jsx)("div",{className:"p-4",children:r("media","video","file","previewUrl","V\xeddeo Full")});case"image-text":return(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4",children:[r("media","image","file","previewUrl","Imagem (Esquerda)"),s("text","Texto (Direita)")]});case"text-image":return(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4",children:[s("text","Texto (Esquerda)"),r("media","image","file","previewUrl","Imagem (Direita)")]});case"image-image":return(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4",children:[r("media","image","file","previewUrl","Imagem 01"),r("media2","image","file2","previewUrl2","Imagem 02")]});case"image-video":return(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4",children:[r("media","image","file","previewUrl","Imagem"),r("media2","video","file2","previewUrl2","V\xeddeo")]});case"video-text":return(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4",children:[r("media","video","file","previewUrl","V\xeddeo (Esquerda)"),s("text","Texto (Direita)")]});default:return(0,l.jsx)("div",{className:"p-4 text-red-500",children:"Tipo de bloco desconhecido"})}}var A=t(78039),U=t(21362),$=t(94514),L=t(16950),z=t(40980);let S=A.bL,P=A.l9;A.YJ,A.ZL,A.Pb,A.z6,s.forwardRef(({className:e,inset:a,children:t,...s},r)=>(0,l.jsxs)(A.ZP,{ref:r,className:(0,z.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",e),...s,children:[t,(0,l.jsx)(U.A,{className:"ml-auto"})]})).displayName=A.ZP.displayName,s.forwardRef(({className:e,...a},t)=>(0,l.jsx)(A.G5,{ref:t,className:(0,z.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})).displayName=A.G5.displayName;let R=s.forwardRef(({className:e,sideOffset:a=4,...t},s)=>(0,l.jsx)(A.ZL,{children:(0,l.jsx)(A.UC,{ref:s,sideOffset:a,className:(0,z.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));R.displayName=A.UC.displayName;let E=s.forwardRef(({className:e,inset:a,...t},s)=>(0,l.jsx)(A.q7,{ref:s,className:(0,z.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",e),...t}));E.displayName=A.q7.displayName,s.forwardRef(({className:e,children:a,checked:t,...s},r)=>(0,l.jsxs)(A.H_,{ref:r,className:(0,z.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:t,...s,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(A.VF,{children:(0,l.jsx)($.A,{className:"h-4 w-4"})})}),a]})).displayName=A.H_.displayName,s.forwardRef(({className:e,children:a,...t},s)=>(0,l.jsxs)(A.hN,{ref:s,className:(0,z.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(A.VF,{children:(0,l.jsx)(L.A,{className:"h-2 w-2 fill-current"})})}),a]})).displayName=A.hN.displayName;let I=s.forwardRef(({className:e,inset:a,...t},s)=>(0,l.jsx)(A.JU,{ref:s,className:(0,z.cn)("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",e),...t}));I.displayName=A.JU.displayName;let T=s.forwardRef(({className:e,...a},t)=>(0,l.jsx)(A.wv,{ref:t,className:(0,z.cn)("-mx-1 my-1 h-px bg-muted",e),...a}));T.displayName=A.wv.displayName;var B=t(3091),F=t(32956),q=t(72055),W=t(56842);let V=e=>e.split(",").map(e=>e.trim()).filter(Boolean),O="w-full rounded-xl border border-white/10 bg-slate-950 px-3 py-2 text-sm text-white outline-none transition-colors focus:border-blue-500",X="text-[11px] uppercase tracking-[0.15em] text-slate-400";function M({label:e,value:a,onChange:t}){let s="video"===a.kind,r=a.previewUrl||a.src;return(0,l.jsxs)("div",{className:"space-y-3 rounded-2xl border border-white/10 bg-slate-950/40 p-4",children:[(0,l.jsx)("p",{className:X,children:e}),(0,l.jsxs)("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[(0,l.jsxs)("label",{className:"space-y-1",children:[(0,l.jsx)("span",{className:X,children:"Tipo"}),(0,l.jsxs)("select",{className:O,value:a.kind||"image",onChange:e=>t({...a,kind:"video"===e.target.value?"video":"image"}),children:[(0,l.jsx)("option",{value:"image",children:"Imagem"}),(0,l.jsx)("option",{value:"video",children:"V\xeddeo"})]})]}),(0,l.jsxs)("label",{className:"space-y-1",children:[(0,l.jsx)("span",{className:X,children:"Upload"}),(0,l.jsx)("input",{className:`${O} file:mr-3 file:rounded-md file:border-0 file:bg-blue-600 file:px-3 file:py-1.5 file:text-xs file:font-semibold file:text-white`,type:"file",accept:s?"video/*":"image/*",onChange:e=>{let l=e.target.files?.[0];l&&t({...a,file:l,previewUrl:URL.createObjectURL(l)})}})]})]}),(0,l.jsxs)("label",{className:"space-y-1",children:[(0,l.jsx)("span",{className:X,children:"URL / Caminho"}),(0,l.jsx)("input",{className:O,placeholder:s?"landing-pages/meu-projeto/hero-video.mp4":"landing-pages/meu-projeto/hero.webp",value:a.src||"",onChange:e=>t({...a,src:e.target.value,file:null,previewUrl:""})})]}),(0,l.jsxs)("label",{className:"space-y-1",children:[(0,l.jsx)("span",{className:X,children:"Texto alternativo"}),(0,l.jsx)("input",{className:O,value:a.alt||"",onChange:e=>t({...a,alt:e.target.value})})]}),s?(0,l.jsxs)("label",{className:"space-y-1",children:[(0,l.jsx)("span",{className:X,children:"Poster (opcional)"}),(0,l.jsx)("input",{className:O,placeholder:"landing-pages/meu-projeto/poster.webp",value:a.poster||"",onChange:e=>t({...a,poster:e.target.value})})]}):null,r?(0,l.jsx)("div",{className:"overflow-hidden rounded-xl border border-white/10 bg-black/40",children:s?(0,l.jsx)("video",{src:r,className:"h-56 w-full object-cover",controls:!0,muted:!0,playsInline:!0}):(0,l.jsx)("img",{src:r,alt:a.alt||"Pr\xe9-visualiza\xe7\xe3o",className:"h-56 w-full object-cover"})}):null]})}function D({value:e,onChange:a}){let t=t=>{a({...e,...t})},s=(a,l)=>{t({gallery_grid:e.gallery_grid.map(e=>e.id===a?{...e,...l}:e)})},r=(a,l)=>{let s="up"===l?a-1:a+1;if(s<0||s>=e.gallery_grid.length)return;let r=[...e.gallery_grid];[r[a],r[s]]=[r[s],r[a]],t({gallery_grid:r})};return(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsx)("section",{className:"space-y-4 rounded-2xl border border-white/10 bg-slate-900/35 p-5",children:(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsxs)("label",{className:"space-y-1",children:[(0,l.jsx)("span",{className:X,children:"T\xedtulo do projeto"}),(0,l.jsx)("input",{className:O,value:e.project_title,onChange:e=>t({project_title:e.target.value})})]}),(0,l.jsxs)("label",{className:"space-y-1",children:[(0,l.jsx)("span",{className:X,children:"Subt\xedtulo"}),(0,l.jsx)("input",{className:O,value:e.project_subtitle||"",onChange:e=>t({project_subtitle:e.target.value||""})})]}),(0,l.jsxs)("label",{className:"space-y-1",children:[(0,l.jsx)("span",{className:X,children:"Slug do projeto"}),(0,l.jsx)("input",{className:O,value:e.project_slug,onChange:e=>t({project_slug:e.target.value})})]}),(0,l.jsxs)("label",{className:"space-y-1",children:[(0,l.jsx)("span",{className:X,children:"Cor de destaque"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("input",{type:"color",className:"h-10 w-12 rounded border border-white/10 bg-transparent",value:e.highlight_color||"#0048ff",onChange:e=>t({highlight_color:e.target.value}),title:"Cor de destaque"}),(0,l.jsx)("input",{className:O,value:e.highlight_color||"#0048ff",onChange:e=>t({highlight_color:e.target.value||"#0048ff"})})]})]}),(0,l.jsxs)("label",{className:"space-y-1",children:[(0,l.jsx)("span",{className:X,children:"Cliente"}),(0,l.jsx)("input",{className:O,value:e.project_client||"",onChange:e=>t({project_client:e.target.value})})]}),(0,l.jsxs)("label",{className:"space-y-1",children:[(0,l.jsx)("span",{className:X,children:"Ano"}),(0,l.jsx)("input",{className:O,type:"number",value:e.project_year||"",onChange:e=>t({project_year:e.target.value?Number(e.target.value):void 0})})]}),(0,l.jsxs)("label",{className:"space-y-1 md:col-span-2",children:[(0,l.jsx)("span",{className:X,children:"Tags (separadas por v\xedrgula)"}),(0,l.jsx)("input",{className:O,value:e.project_tags.join(", "),onChange:e=>t({project_tags:V(e.target.value)})})]}),(0,l.jsxs)("label",{className:"space-y-1 md:col-span-2",children:[(0,l.jsx)("span",{className:X,children:"Servi\xe7os (separados por v\xedrgula)"}),(0,l.jsx)("input",{className:O,value:(e.project_services||[]).join(", "),onChange:e=>t({project_services:V(e.target.value)})})]}),(0,l.jsxs)("label",{className:"space-y-1 md:col-span-2",children:[(0,l.jsx)("span",{className:X,children:"Resumo do projeto"}),(0,l.jsx)("textarea",{className:`${O} min-h-28`,value:e.project_summary||"",onChange:e=>t({project_summary:e.target.value})})]}),(0,l.jsxs)("label",{className:"space-y-1 md:col-span-2",children:[(0,l.jsx)("span",{className:X,children:"Headline da intro"}),(0,l.jsx)("input",{className:O,value:e.intro_headline||"",onChange:e=>t({intro_headline:e.target.value})})]}),(0,l.jsxs)("label",{className:"space-y-1 md:col-span-2",children:[(0,l.jsx)("span",{className:X,children:"Par\xe1grafos da intro (1 por linha)"}),(0,l.jsx)("textarea",{className:`${O} min-h-32`,value:(e.intro_body||[]).join("\n"),onChange:e=>t({intro_body:e.target.value.split("\n").map(e=>e.trim()).filter(Boolean)})})]})]})}),(0,l.jsxs)("section",{className:"space-y-4",children:[(0,l.jsx)("h3",{className:"text-xs font-bold uppercase tracking-[0.2em] text-blue-300",children:"Hero"}),(0,l.jsxs)("div",{className:"grid gap-4 xl:grid-cols-2",children:[(0,l.jsx)(M,{label:"Hero Cover",value:e.hero_cover_image,onChange:e=>t({hero_cover_image:e})}),(0,l.jsx)(M,{label:"Logo Hero (opcional)",value:e.hero_logo_image||{src:"",alt:"",kind:"image",poster:""},onChange:e=>t({hero_logo_image:e})})]})]}),(0,l.jsxs)("section",{className:"space-y-4 rounded-2xl border border-white/10 bg-slate-900/35 p-5",children:[(0,l.jsx)("h3",{className:"text-xs font-bold uppercase tracking-[0.2em] text-blue-300",children:"Navega\xe7\xe3o e SEO"}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsxs)("label",{className:"space-y-1",children:[(0,l.jsx)("span",{className:X,children:"Texto bot\xe3o voltar"}),(0,l.jsx)("input",{className:O,value:e.navigation?.back_label||"",onChange:a=>t({navigation:{...e.navigation,back_label:a.target.value}})})]}),(0,l.jsxs)("label",{className:"space-y-1",children:[(0,l.jsx)("span",{className:X,children:"Texto pr\xf3ximo projeto"}),(0,l.jsx)("input",{className:O,value:e.navigation?.next_label||"",onChange:a=>t({navigation:{...e.navigation,next_label:a.target.value}})})]}),(0,l.jsxs)("label",{className:"space-y-1",children:[(0,l.jsx)("span",{className:X,children:"Slug pr\xf3ximo projeto"}),(0,l.jsx)("input",{className:O,value:e.navigation?.next_project_slug||"",onChange:a=>t({navigation:{...e.navigation,next_project_slug:a.target.value}})})]}),(0,l.jsxs)("label",{className:"space-y-1",children:[(0,l.jsx)("span",{className:X,children:"CTA"}),(0,l.jsx)("input",{className:O,value:e.cta?.label||"",onChange:a=>t({cta:{...e.cta,label:a.target.value}})})]}),(0,l.jsxs)("label",{className:"space-y-1",children:[(0,l.jsx)("span",{className:X,children:"Link CTA"}),(0,l.jsx)("input",{className:O,value:e.cta?.href||"",onChange:a=>t({cta:{...e.cta,href:a.target.value}})})]}),(0,l.jsxs)("label",{className:"space-y-1 md:col-span-2",children:[(0,l.jsx)("span",{className:X,children:"SEO descri\xe7\xe3o"}),(0,l.jsx)("textarea",{className:`${O} min-h-24`,value:e.seo?.description||"",onChange:a=>t({seo:{...e.seo,description:a.target.value}})})]}),(0,l.jsxs)("label",{className:"space-y-1 md:col-span-2",children:[(0,l.jsx)("span",{className:X,children:"SEO og:image"}),(0,l.jsx)("input",{className:O,value:e.seo?.og_image||"",onChange:a=>t({seo:{...e.seo,og_image:a.target.value}})})]})]})]}),(0,l.jsxs)("section",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h3",{className:"text-xs font-bold uppercase tracking-[0.2em] text-blue-300",children:"Gallery Grid"}),(0,l.jsxs)("button",{type:"button",onClick:()=>{let a;return t({gallery_grid:[...e.gallery_grid,(a=e.gallery_grid.length,{id:`grid-item-${a+1}`,kind:"image",layout:"full",src:"",alt:"",title:"",eyebrow:"",description:"",quote:""})]})},className:"inline-flex min-h-11 items-center gap-2 rounded-full bg-blue-600 px-4 text-xs font-semibold uppercase tracking-[0.1em] text-white hover:bg-blue-500",children:[(0,l.jsx)(u.A,{size:14}),"Adicionar item"]})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[0===e.gallery_grid.length?(0,l.jsx)("div",{className:"rounded-2xl border border-dashed border-white/15 bg-slate-950/30 px-4 py-12 text-center text-sm text-slate-400",children:"Nenhum item na galeria. Adicione o primeiro bloco de m\xeddia."}):null,e.gallery_grid.map((a,i)=>{let o=a.previewUrl||a.src;return(0,l.jsxs)("div",{className:"space-y-4 rounded-2xl border border-white/10 bg-slate-900/35 p-5",children:[(0,l.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,l.jsxs)("p",{className:"text-xs uppercase tracking-[0.14em] text-slate-300",children:["Item ",i+1]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("button",{type:"button",onClick:()=>r(i,"up"),className:"rounded-md border border-white/10 bg-black/40 p-2 text-slate-300 hover:text-white","aria-label":"Mover para cima",children:(0,l.jsx)(q.A,{size:14})}),(0,l.jsx)("button",{type:"button",onClick:()=>r(i,"down"),className:"rounded-md border border-white/10 bg-black/40 p-2 text-slate-300 hover:text-white","aria-label":"Mover para baixo",children:(0,l.jsx)(W.A,{size:14})}),(0,l.jsx)("button",{type:"button",onClick:()=>{var l;return l=a.id,void t({gallery_grid:e.gallery_grid.filter(e=>e.id!==l)})},className:"rounded-md border border-red-400/30 bg-red-500/10 p-2 text-red-300 hover:text-red-200","aria-label":"Remover item",children:(0,l.jsx)(p.A,{size:14})})]})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsxs)("label",{className:"space-y-1",children:[(0,l.jsx)("span",{className:X,children:"Layout"}),(0,l.jsxs)("select",{className:O,value:a.layout,onChange:e=>s(a.id,{layout:e.target.value}),children:[(0,l.jsx)("option",{value:"full",children:"Full Width"}),(0,l.jsx)("option",{value:"feature",children:"Feature Banner"}),(0,l.jsx)("option",{value:"quote-band",children:"Quote Band"}),(0,l.jsx)("option",{value:"split-left",children:"Split Left"}),(0,l.jsx)("option",{value:"split-right",children:"Split Right"})]})]}),(0,l.jsxs)("label",{className:"space-y-1",children:[(0,l.jsx)("span",{className:X,children:"Tipo de m\xeddia"}),(0,l.jsxs)("select",{className:O,value:a.kind,onChange:e=>s(a.id,{kind:"video"===e.target.value?"video":"image"}),children:[(0,l.jsx)("option",{value:"image",children:"Imagem"}),(0,l.jsx)("option",{value:"video",children:"V\xeddeo"})]})]}),(0,l.jsxs)("label",{className:"space-y-1 md:col-span-2",children:[(0,l.jsx)("span",{className:X,children:"URL / Caminho"}),(0,l.jsx)("input",{className:O,value:a.src,onChange:e=>s(a.id,{src:e.target.value,file:null,previewUrl:""})})]}),(0,l.jsxs)("label",{className:"space-y-1",children:[(0,l.jsx)("span",{className:X,children:"Upload"}),(0,l.jsx)("input",{type:"file",className:`${O} file:mr-3 file:rounded-md file:border-0 file:bg-blue-600 file:px-3 file:py-1.5 file:text-xs file:font-semibold file:text-white`,accept:"video"===a.kind?"video/*":"image/*",onChange:e=>{let t=e.target.files?.[0];t&&s(a.id,{file:t,previewUrl:URL.createObjectURL(t)})}})]}),(0,l.jsxs)("label",{className:"space-y-1",children:[(0,l.jsx)("span",{className:X,children:"Poster (v\xeddeo)"}),(0,l.jsx)("input",{className:O,value:a.poster||"",onChange:e=>s(a.id,{poster:e.target.value})})]}),(0,l.jsxs)("label",{className:"space-y-1 md:col-span-2",children:[(0,l.jsx)("span",{className:X,children:"Alt"}),(0,l.jsx)("input",{className:O,value:a.alt,onChange:e=>s(a.id,{alt:e.target.value})})]}),(0,l.jsxs)("label",{className:"space-y-1",children:[(0,l.jsx)("span",{className:X,children:"Eyebrow"}),(0,l.jsx)("input",{className:O,value:a.eyebrow||"",onChange:e=>s(a.id,{eyebrow:e.target.value})})]}),(0,l.jsxs)("label",{className:"space-y-1",children:[(0,l.jsx)("span",{className:X,children:"T\xedtulo"}),(0,l.jsx)("input",{className:O,value:a.title||"",onChange:e=>s(a.id,{title:e.target.value})})]}),(0,l.jsxs)("label",{className:"space-y-1 md:col-span-2",children:[(0,l.jsx)("span",{className:X,children:"Descri\xe7\xe3o"}),(0,l.jsx)("textarea",{className:`${O} min-h-24`,value:a.description||"",onChange:e=>s(a.id,{description:e.target.value})})]}),(0,l.jsxs)("label",{className:"space-y-1 md:col-span-2",children:[(0,l.jsx)("span",{className:X,children:"Quote (quote band)"}),(0,l.jsx)("input",{className:O,value:a.quote||"",onChange:e=>s(a.id,{quote:e.target.value})})]})]}),o?(0,l.jsx)("div",{className:"overflow-hidden rounded-xl border border-white/10 bg-black/50",children:"video"===a.kind?(0,l.jsx)("video",{src:o,className:"h-48 w-full object-cover",controls:!0,muted:!0,playsInline:!0}):(0,l.jsx)("img",{src:o,alt:a.alt||"Preview",className:"h-48 w-full object-cover"})}):(0,l.jsxs)("div",{className:"flex h-24 items-center justify-center rounded-xl border border-dashed border-white/10 text-xs text-slate-500",children:["video"===a.kind?(0,l.jsx)(h.A,{className:"mr-2 h-4 w-4"}):(0,l.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Sem pr\xe9-visualiza\xe7\xe3o"]})]},a.id)})]})]})]})}let H="/site-assets/",J=e=>e?e.includes(H)?e.split(H).pop()||"":e.replace(/^\/?storage\/v1\/object\/public\/site-assets\//,"").replace(/^\/?site-assets\//,"").replace(/^\//,""):"";function Y({initialData:e}){let a,t=(0,r.useRouter)(),N=(0,o.i)(),y=(0,s.useMemo)(()=>(0,F.hw)(e?.content,{slug:e?.slug,title:e?.title,cover:e?.cover}),[e]),[k,A]=(0,s.useState)(e?.title||""),[U,$]=(0,s.useState)(e?.slug||""),[L,z]=(0,s.useState)(y.template),[q,W]=(0,s.useState)(null),[V,O]=(0,s.useState)(e?.cover?`https://umkmwbkwvulxtdodzmzf.supabase.co/storage/v1/object/public/site-assets/${e.cover}`:""),[X,M]=(0,s.useState)(y.template===B.r?y.blocks.map(e=>({...e,id:e.id||(0,n.A)(),content:{...e.content,media:e.content.media?.startsWith("http")?e.content.media:e.content.media?`https://umkmwbkwvulxtdodzmzf.supabase.co/storage/v1/object/public/site-assets/${e.content.media}`:void 0,media2:e.content.media2?.startsWith("http")?e.content.media2:e.content.media2?`https://umkmwbkwvulxtdodzmzf.supabase.co/storage/v1/object/public/site-assets/${e.content.media2}`:void 0}})):[]),[H,Y]=(0,s.useState)({...a=y.template===B._?y.data:(0,F.bw)({slug:e?.slug,title:e?.title,cover:e?.cover}),hero_cover_image:{...a.hero_cover_image,file:null,previewUrl:""},hero_logo_image:a.hero_logo_image?{...a.hero_logo_image,file:null,previewUrl:""}:void 0,gallery_grid:a.gallery_grid.map(e=>({...e,file:null,previewUrl:""}))}),[Z,G]=(0,s.useState)(!1),Q=e=>{M([...X,{id:(0,n.A)(),type:e,content:{},file:null,file2:null}])},K=(e,a)=>{let t=[...X],l="up"===a?e-1:e+1;l<0||l>=X.length||([t[e],t[l]]=[t[l],t[e]],M(t))},ee=async(e,a)=>await (0,f.h)({file:e,key:a,page:"landing-pages",subPath:U||"general",bucket:"site-assets"}),ea=async()=>{let a=e?.cover||"";if(q){let e=await ee(q,`cover-${(0,n.A)()}`);e&&(a=e)}return{coverPath:a,content:await Promise.all(X.map(async e=>{let a=e.content.media,t=e.content.media2;if(e.file){let t=await ee(e.file,`block-${e.id}-media1`);t&&(a=t)}else a&&(a=J(a));if(e.file2){let a=await ee(e.file2,`block-${e.id}-media2`);a&&(t=a)}else t&&(t=J(t));return{id:e.id,type:e.type,content:{...e.content,media:a,media2:t}}}))}},et=async()=>{let e,a={...H,project_slug:U,project_title:H.project_title||k},t=a.hero_cover_image.src;if(a.hero_cover_image.file){let e=await ee(a.hero_cover_image.file,`master-hero-${(0,n.A)()}`);e&&(t=e)}else t=J(t);let l=a.hero_logo_image;if(l?.file){let e=await ee(l.file,`master-logo-${(0,n.A)()}`);e&&(l={...l,src:e,file:null,previewUrl:""})}else l?.src&&(l={...l,src:J(l.src)});let s=await Promise.all(a.gallery_grid.map(async e=>{let a=e.src;if(e.file){let t=await ee(e.file,`master-grid-${e.id}`);t&&(a=t)}else a=J(a);return{...e,src:a,poster:e.poster?J(e.poster):e.poster,file:null,previewUrl:""}})),r={...e={...a,hero_cover_image:{...a.hero_cover_image,src:t,file:null,previewUrl:""},hero_logo_image:l,gallery_grid:s,seo:{...a.seo,og_image:a.seo?.og_image?J(a.seo.og_image):t}},hero_cover_image:{src:e.hero_cover_image.src,alt:e.hero_cover_image.alt,kind:e.hero_cover_image.kind,poster:e.hero_cover_image.poster},hero_logo_image:e.hero_logo_image?{src:e.hero_logo_image.src,alt:e.hero_logo_image.alt,kind:e.hero_logo_image.kind,poster:e.hero_logo_image.poster}:void 0,gallery_grid:e.gallery_grid.map(e=>({id:e.id,src:e.src,alt:e.alt,kind:e.kind,layout:e.layout,poster:e.poster,title:e.title,eyebrow:e.eyebrow,description:e.description,quote:e.quote}))};return{coverPath:t,content:r}},el=async()=>{if(!k||!U)return void alert("T\xedtulo e Slug s\xe3o obrigat\xf3rios.");try{G(!0);let a=L===B._?await et():await ea(),l={title:k,slug:U,cover:a.coverPath,content:a.content};if(e?.id){let{error:a}=await N.from("landing_pages").update(l).eq("id",e.id);if(a)throw a}else{let{error:e}=await N.from("landing_pages").insert({...l,created_at:new Date().toISOString()});if(e)throw e}t.push("/admin/landing-pages"),t.refresh()}catch(a){let e=a instanceof Error?a.message:"Erro desconhecido";console.error(a),alert(`Erro ao salvar p\xe1gina: ${e}`)}finally{G(!1)}};return(0,l.jsxs)("div",{className:"max-w-6xl mx-auto space-y-12 pb-48",children:[(0,l.jsxs)("div",{className:"sticky top-4 z-50 flex items-center justify-between rounded-full border border-white/10 bg-black/50 p-4 shadow-2xl backdrop-blur-md",children:[(0,l.jsxs)(_(),{href:"/admin/landing-pages",className:"flex items-center gap-2 px-4 text-slate-400 transition-colors hover:text-white",children:[(0,l.jsx)(c.A,{size:20}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Voltar"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[U?(0,l.jsx)(_(),{href:`/projects/${U}`,target:"_blank",rel:"noopener noreferrer",className:"hidden rounded-full border border-white/15 px-5 py-2 text-xs font-semibold uppercase tracking-[0.1em] text-slate-200 transition-colors hover:border-blue-400 hover:text-white md:inline-flex",children:"Preview"}):null,(0,l.jsx)("span",{className:"hidden text-sm text-slate-500 lg:inline",children:L===B._?`${H.gallery_grid.length} itens no gallery_grid`:`${X.length} blocos adicionados`}),(0,l.jsxs)("button",{onClick:el,disabled:Z,className:"flex items-center gap-2 rounded-full bg-blue-600 px-8 py-2.5 text-sm font-bold tracking-wide text-white shadow-lg shadow-blue-600/20 transition-all hover:bg-blue-500 disabled:opacity-50",children:[(0,l.jsx)(d.A,{size:18}),Z?"PUBLICANDO...":"SALVAR P\xc1GINA"]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-3",children:[(0,l.jsx)("div",{className:"space-y-6 lg:col-span-1",children:(0,l.jsxs)("div",{className:"sticky top-28 space-y-6 rounded-3xl border border-white/5 bg-slate-900/40 p-6",children:[(0,l.jsx)("h2",{className:"mb-4 text-xs font-bold uppercase tracking-[0.2em] text-blue-400",children:"Configura\xe7\xf5es"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-500",children:"Tipo de Template"}),(0,l.jsxs)("select",{className:"w-full rounded-xl border border-white/10 bg-slate-950 px-4 py-3 text-sm outline-none focus:border-blue-500",value:L,onChange:e=>z(e.target.value),children:[(0,l.jsx)("option",{value:B._,children:"Template Mestre Novo"}),(0,l.jsx)("option",{value:B.r,children:"Legacy Blocks"})]}),(0,l.jsx)("p",{className:"text-[11px] leading-relaxed text-slate-500",children:"O template novo usa schema estruturado para p\xe1ginas editoriais em `/projects/:slug`. O modo legacy mant\xe9m o builder por blocos."})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-500",children:"T\xedtulo"}),(0,l.jsx)("input",{type:"text",value:k,onChange:e=>{let a=e.target.value;A(a),L!==B._||H.project_title||Y(e=>({...e,project_title:a}))},className:"w-full rounded-xl border border-white/10 bg-slate-950 px-4 py-3 text-lg font-medium outline-none focus:border-blue-500",placeholder:"Nome do Projeto"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-500",children:"Slug URL"}),(0,l.jsxs)("div",{className:"flex items-center gap-1 rounded-xl border border-white/10 bg-slate-950 px-3 py-2 text-slate-500",children:[(0,l.jsx)("span",{className:"text-xs",children:"/projects/"}),(0,l.jsx)("input",{type:"text",value:U,onChange:e=>{let a=e.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"-");$(a),L===B._&&Y(e=>({...e,project_slug:a}))},className:"w-full bg-transparent text-sm font-mono text-white outline-none",placeholder:"my-project"})]})]}),L===B.r?(0,l.jsxs)("div",{className:"space-y-3 border-t border-white/5 pt-4",children:[(0,l.jsxs)("label",{className:"flex items-center gap-2 text-[10px] font-bold uppercase tracking-widest text-slate-500",children:["Header Hero Image"," ",(0,l.jsx)("span",{className:"text-[10px] text-blue-500",children:"(Cover)"})]}),(0,l.jsx)("div",{className:"group relative aspect-4/3 overflow-hidden rounded-xl border border-white/10 bg-slate-950",children:V?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(w.default,{src:V,alt:"Cover",fill:!0,className:"object-cover"}),(0,l.jsx)("button",{onClick:()=>{W(null),O("")},className:"absolute top-2 right-2 rounded-full bg-red-600 p-2 opacity-0 transition-opacity group-hover:opacity-100",title:"Remover Capa","aria-label":"Remover Capa",type:"button",children:(0,l.jsx)(p.A,{size:16})})]}):(0,l.jsxs)("label",{className:"absolute inset-0 flex cursor-pointer flex-col items-center justify-center transition-colors hover:bg-white/5",children:[(0,l.jsx)(m.A,{className:"mb-2 text-slate-600"}),(0,l.jsx)("span",{className:"text-[10px] text-slate-500",children:"Upload Capa"}),(0,l.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:e=>{let a=e.target.files?.[0];a&&(W(a),O(URL.createObjectURL(a)))}})]})})]}):null]})}),(0,l.jsx)("div",{className:"space-y-8 lg:col-span-2",children:L===B._?(0,l.jsx)(D,{value:H,onChange:Y}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h2",{className:"text-xs font-bold uppercase tracking-[0.2em] text-white",children:"Builder"}),(0,l.jsxs)(S,{children:[(0,l.jsx)(P,{asChild:!0,children:(0,l.jsxs)("button",{className:"flex items-center gap-2 rounded-full bg-blue-600 px-4 py-2 text-xs font-bold uppercase tracking-wide text-white shadow-lg transition-all hover:bg-blue-500 hover:shadow-blue-500/25",children:[(0,l.jsx)(u.A,{size:16})," Adicionar Bloco"]})}),(0,l.jsxs)(R,{align:"end",className:"w-56 border-slate-800 bg-slate-900 text-slate-200",children:[(0,l.jsx)(I,{className:"text-xs uppercase tracking-widest text-slate-500",children:"Layouts B\xe1sicos"}),(0,l.jsxs)(E,{onClick:()=>Q("text"),children:[(0,l.jsx)(x.A,{className:"mr-2 h-4 w-4"})," Texto Puro"]}),(0,l.jsxs)(E,{onClick:()=>Q("image"),children:[(0,l.jsx)(m.A,{className:"mr-2 h-4 w-4"})," Imagem Full"]}),(0,l.jsxs)(E,{onClick:()=>Q("video"),children:[(0,l.jsx)(h.A,{className:"mr-2 h-4 w-4"})," V\xeddeo Full"]}),(0,l.jsxs)(E,{onClick:()=>Q("video-autoplay"),children:[(0,l.jsx)(h.A,{className:"mr-2 h-4 w-4 text-blue-400"})," V\xeddeo Autoplay (Loop)"]}),(0,l.jsx)(T,{className:"bg-slate-800"}),(0,l.jsx)(I,{className:"text-xs uppercase tracking-widest text-slate-500",children:"Composi\xe7\xf5es"}),(0,l.jsxs)(E,{onClick:()=>Q("image-text"),children:[(0,l.jsxs)("div",{className:"mr-2 flex items-center",children:[(0,l.jsx)(m.A,{className:"h-3 w-3"}),(0,l.jsx)(x.A,{className:"h-3 w-3"})]})," ","Imagem + Texto"]}),(0,l.jsxs)(E,{onClick:()=>Q("text-image"),children:[(0,l.jsxs)("div",{className:"mr-2 flex items-center",children:[(0,l.jsx)(x.A,{className:"h-3 w-3"}),(0,l.jsx)(m.A,{className:"h-3 w-3"})]})," ","Texto + Imagem"]}),(0,l.jsxs)(E,{onClick:()=>Q("image-image"),children:[(0,l.jsx)(g.A,{className:"mr-2 h-4 w-4"})," Imagem Dupla (Grid)"]}),(0,l.jsxs)(E,{onClick:()=>Q("image-video"),children:[(0,l.jsxs)("div",{className:"mr-2 flex items-center",children:[(0,l.jsx)(m.A,{className:"h-3 w-3"}),(0,l.jsx)(h.A,{className:"h-3 w-3"})]})," ","Imagem + V\xeddeo"]}),(0,l.jsxs)(E,{onClick:()=>Q("video-text"),children:[(0,l.jsxs)("div",{className:"mr-2 flex items-center",children:[(0,l.jsx)(h.A,{className:"h-3 w-3"}),(0,l.jsx)(x.A,{className:"h-3 w-3"})]})," ","V\xeddeo + Texto"]})]})]})]}),(0,l.jsxs)("div",{className:"min-h-[500px] space-y-8",children:[0===X.length&&(0,l.jsxs)("div",{className:"flex h-64 flex-col items-center justify-center rounded-3xl border-2 border-dashed border-white/5 bg-slate-900/20 text-slate-500",children:[(0,l.jsx)(b.A,{className:"mb-4 opacity-20",size:64}),(0,l.jsx)("p",{className:"text-sm",children:"Comece adicionando um bloco via menu acima."})]}),X.map((e,a)=>(0,l.jsxs)(i.P.div,{initial:{opacity:0},animate:{opacity:1},className:"group relative overflow-hidden rounded-3xl border border-white/5 bg-[#0a0a0a] shadow-xl transition-all hover:border-blue-500/30",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between border-b border-white/5 bg-white/5 px-6 py-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("span",{className:"rounded border border-blue-500/20 bg-blue-500/10 px-2 py-1 text-[10px] font-bold text-blue-400",children:(a+1).toString().padStart(2,"0")}),(0,l.jsx)("span",{className:"text-xs font-bold uppercase tracking-widest text-slate-400",children:e.type.replace("-"," & ")})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1 opacity-50 transition-opacity group-hover:opacity-100",children:[(0,l.jsx)("button",{onClick:()=>K(a,"up"),disabled:0===a,className:"rounded-lg p-2 hover:bg-white/10 disabled:opacity-20",title:"Mover para cima","aria-label":"Mover para cima",type:"button",children:(0,l.jsx)(j.A,{size:14})}),(0,l.jsx)("button",{onClick:()=>K(a,"down"),disabled:a===X.length-1,className:"rounded-lg p-2 hover:bg-white/10 disabled:opacity-20",title:"Mover para baixo","aria-label":"Mover para baixo",type:"button",children:(0,l.jsx)(v.A,{size:14})}),(0,l.jsx)("div",{className:"mx-2 h-4 w-px bg-white/10"}),(0,l.jsx)("button",{onClick:()=>{var a;return a=e.id,void(confirm("Tem certeza que deseja remover este bloco?")&&M(X.filter(e=>e.id!==a)))},className:"rounded-lg p-2 text-slate-500 hover:bg-red-500/20 hover:text-red-400",title:"Remover bloco","aria-label":"Remover bloco",type:"button",children:(0,l.jsx)(p.A,{size:14})})]})]}),(0,l.jsx)(C,{block:e,onChange:a=>{var t;return t=e.id,void M(X.map(e=>e.id===t?{...e,...a}:e))}})]},e.id))]})]})})]})]})}},58520:(e,a,t)=>{function l(e,a){if(!e)return null;let t=a?.replace(/^\/+|\/+$/g,""),l=e.trim();return l=(l=(l=(l=(l=(l=(l=(l=(l=l.replace(/^file_path:\s*/i,"")).replace(/^key:\s*/i,"")).replace(/^"+|"+$/g,"")).replace(/^'+|'+$/g,"")).replace(/,+$/g,"")).replace(/\s+$/g,"")).replace(/^https?:\/\/[^/]+\/storage\/v1\/(?:render\/image|object)\/public\//,"")).replace(/^\/?storage\/v1\/(?:render\/image|object)\/public\//,"")).replace(/^\/+/,""),t&&l.startsWith(`${t}/`)&&(l=l.slice(t.length+1)),l}function s(e,a){if(!a)return null;let t=a.startsWith("http://")||a.startsWith("https://"),s=a.includes("/storage/v1/");if(t&&!s)try{let e=new URL(a);if("https:"!==e.protocol)return console.warn(`Protocolo inseguro detectado: ${a}`),null;return a}catch{return console.error(`URL inv\xe1lida: ${a}`),null}let r=e.replace(/^\/+|\/+$/g,""),i=l(a,r);if(!i)return a.startsWith("http")?a:null;if(t&&s)try{let e=new URL(a),t=`${e.protocol}//${e.host}`;return`${t}/storage/v1/object/public/${r}/${i}`}catch{}let o=function(){let e="https://umkmwbkwvulxtdodzmzf.supabase.co";if(!e)throw Error("Supabase URL n\xe3o definida. Configure NEXT_PUBLIC_SUPABASE_URL ou SUPABASE_URL.");try{return e.replace(/\/+$/,"")}catch{return e}}();return o?`${o}/storage/v1/object/public/${r}/${i}`:a.startsWith("http")?a:null}function r(e){if(!e)return null;let a=e.trim();if(!a)return null;try{let t=new URL(a);if(["https:","http:"].includes(t.protocol))return t.toString();return console.warn(`Link externo inseguro bloqueado: ${e}`),null}catch{if(a.startsWith("/")||a.startsWith("#"))return a;if(a.startsWith("//"))try{return new URL(`https:${a}`).toString()}catch{}return console.error(`URL externa inv\xe1lida: ${e}`),null}}t.d(a,{VV:()=>s,WZ:()=>l,j7:()=>r})},85580:(e,a,t)=>{t.d(a,{h:()=>o,b:()=>i});var l=t(28713);let s=/[^a-z0-9._-]/g;var r=t(58520);async function i(e,a,t,s){let i,o,n=(0,l.i)(),c=s.name.split(".").pop(),d=c?`${t}.${c}`:t,p=(o=(i=a.replace(/\/+$/g,"").replace(/^\/+/g,""))?`${i}`:"")?`${o}/${d}`:d,{data:m,error:u}=await n.storage.from(e).upload(p,s,{cacheControl:"3600",upsert:!0});if(u)throw u;return(0,r.WZ)(m.path,e)}async function o({file:e,key:a,page:t,subPath:i,bucket:o="site-assets"}){let n=(0,l.i)(),c=function({page:e,key:a,subPath:t,extension:l}){let r=[e&&e.trim().length>0?e.trim():"global"];t&&r.push(t.trim().replace(/^\/+|\/+$/g,""));let i=a.trim().toLowerCase().replace(/\s+/g,"_").replace(s,""),o=l.toLowerCase().replace(/^\.+/,"")||"bin",n=`${i}.${o}`;return`${r.join("/")}/${n}`}({page:t,key:a,subPath:i,extension:e.name.split(".").pop()??"bin"}),{data:d,error:p}=await n.storage.from(o).upload(c,e,{cacheControl:"3600",upsert:!0});if(p)throw p;return(0,r.WZ)(d.path,o)}}}]);