# Settings for Backend (on Cloud Run).
# See https://firebase.google.com/docs/app-hosting/configure#cloud-run
runConfig:
  minInstances: 0
  maxInstances: 10
  memoryMiB: 512

# Environment variables and secrets.
# See https://firebase.google.com/docs/app-hosting/configure#user-defined-environment
env:
  # Public Variables (Inlined at BUILD and available at RUNTIME)
  - variable: NEXT_PUBLIC_SUPABASE_URL
    value: https://umkmwbkwvulxtdodzmzf.supabase.co
    availability: [ BUILD, RUNTIME ]
  - variable: NEXT_PUBLIC_SITE_URL
    value: https://portfolio-danilo-novais.web.app
    availability: [ BUILD, RUNTIME ]
  - variable: NEXT_PUBLIC_PRODUCTION_URL
    value: https://portfoliodanilo.com
    availability: [ BUILD, RUNTIME ]
  - variable: APP_ENV
    value: production
    availability: [ RUNTIME ]

  # Secrets (Availability: BUILD and RUNTIME is critical for NEXT_PUBLIC_ keys)
  - variable: NEXT_PUBLIC_SUPABASE_ANON_KEY
    secret: SUPABASE_ANON_KEY
    availability: [ BUILD, RUNTIME ]

  # Server-side only secrets (Availability: RUNTIME only)
  - variable: SUPABASE_SERVICE_ROLE_KEY
    secret: SUPABASE_SERVICE_ROLE_KEY
    availability: [ RUNTIME ]
  - variable: FIREBASE_SDK_SECRET
    secret: FIREBASE_SDK_SECRET
    availability: [ RUNTIME ]
  - variable: GEMINI_API_KEY
    secret: GEMINI_API_KEY
    availability: [ RUNTIME ]
  - variable: OPENAI_API_KEY
    secret: OPENAI_API_KEY
    availability: [ RUNTIME ]
  - variable: SUPABASE_ANON_KEY
    secret: SUPABASE_ANON_KEY
